(this["webpackJsonpflipy-react-ts"]=this["webpackJsonpflipy-react-ts"]||[]).push([[0],{117:function(t,e,n){},157:function(t,e,n){},158:function(t,e,n){},168:function(t,e,n){"use strict";n.r(e);var c=n(5),r=n.n(c),a=n(52),i=n.n(a),o=(n(157),n(16)),s=n(230),u=(n(158),n(222)),d=n(8),f=Object(u.a)((function(t){return{root:{maxWidth:1200,marginLeft:"auto",marginRight:"auto"}}})),j=function(t){var e=t.children,n=f();return Object(d.jsx)(s.a,{className:n.root,children:e})},l=n(46),b=(n(117),n(231)),x=function(t){var e=t.isAnimating,n=t.front,c=t.back;return Object(d.jsxs)(s.a,{className:"animated ".concat(e&&"front"),children:[Object(d.jsx)(s.a,{className:"image",children:n}),Object(d.jsx)(s.a,{className:"text",children:c})]})},O=function(t){var e=t.state,n=t.front,r=t.back,a=Object(c.useState)(),i=Object(o.a)(a,2),u=i[0],f=i[1],j=Object(c.useState)(!0),l=Object(o.a)(j,2),b=l[0],O=l[1];return Object(c.useEffect)((function(){u||b||(f(!0),setTimeout((function(){f(!1)}),1e3))}),[e]),Object(c.useEffect)((function(){O(!1)}),[]),Object(d.jsx)(s.a,{children:u?Object(d.jsxs)(d.Fragment,{children:["back"===e&&Object(d.jsx)(x,{isAnimating:u,front:n(u),back:r}),"front"===e&&Object(d.jsx)(x,{isAnimating:u,front:r,back:n(u)})]}):Object(d.jsxs)(d.Fragment,{children:["front"===e&&n(!1),"back"===e&&r]})})},h=n(232),p=function(t){return Object(d.jsx)(b.a,{sx:{color:"white",textAlign:"center",flex:1},children:t.text})},g=function(t){var e=t.sx;return Object(d.jsx)(s.a,{sx:Object(l.a)(Object(l.a)({},e),{},{width:2,height:24,backgroundColor:"white"})})},m=function(t){var e=t.seconds;e<0&&(e=0);var n=function(t){return{day:Math.floor(t/86400),hour:Math.floor(t%86400/3600),minute:Math.floor(t%3600/60),second:Math.floor(t%60)}}(e),c=0===n.day&&0===n.hour&&0===n.minute&&0===n.second;return Object(d.jsxs)(s.a,{sx:{display:"flex",justifyContent:"space-between",width:"100%",mx:4},children:[0!==n.day&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{text:n.day.toString()}),Object(d.jsx)(g,{})]}),0!==n.hour&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{text:n.hour.toString()}),Object(d.jsx)(g,{})]}),0!==n.minute&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{text:n.minute.toString()}),Object(d.jsx)(g,{})]}),!c&&Object(d.jsx)(p,{text:n.second.toString()})]})},v=function(){var t=Object(c.useState)(-1),e=Object(o.a)(t,2),n=e[0],r=e[1],a=Object(c.useRef)(!1);return Object(c.useEffect)((function(){setTimeout((function(){n>0&&!a.current&&r((function(t){return t-1}))}),1e3)}),[n]),Object(c.useEffect)((function(){return function(){a.current=!0}}),[]),{stop:function(){a.current=!0},start:function(t){a.current=!1,r(t)},seconds:n}},C=function(t){var e=t.isAnimating,n=t.onDoubleClick,r=t.seconds,a=t.onTimePassed,i=v();0===i.seconds&&setTimeout((function(){a()}),200);return Object(c.useEffect)((function(){e||i.start(r)}),[]),Object(d.jsx)(h.a,{onDoubleClick:function(){i.stop(),n()},sx:{display:"flex",justifyContent:"center",alignItems:"center",width:200,height:200,backgroundColor:"rgba(22,111,147,0.83)"},children:Object(d.jsx)(m,{seconds:i.seconds})})},k=function(t){var e=t.text,n=t.onClick;return Object(d.jsx)(h.a,{onClick:n,sx:{position:"relative",width:200,height:200,padding:1,backgroundColor:"white",overflow:"hidden"},children:Object(d.jsxs)(b.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center"},children:[" ",e]})})},y=n(233),S=n(133),w=n.n(S),T=n(132),F=n.n(T),I=function(t){var e=t.text,n=t.onClick,c=t.onConfirm,r=t.onCancel;return Object(d.jsxs)(h.a,{onClick:n,sx:{position:"relative",width:200,height:200,backgroundColor:"#ffffff"},children:[Object(d.jsxs)(b.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",textAlign:"center"},children:[" ",e]}),Object(d.jsxs)(s.a,{sx:{position:"absolute",bottom:0,left:0,right:0,height:70,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(d.jsx)(y.a,{onClick:function(t){t.stopPropagation(),r()},color:"secondary",sx:{ml:2},children:Object(d.jsx)(F.a,{sx:{color:"red"}})}),Object(d.jsx)(y.a,{onClick:function(t){t.stopPropagation(),c()},sx:{mr:2},children:Object(d.jsx)(w.a,{sx:{color:"green"}})})]})]})},A=function(t){var e=t.state,n=t.frontText,r=t.backText,a=t.onHiddenDoubleClick,i=t.onClick,o=t.onConfirm,s=t.onCancel,u=t.seconds,f=t.onTimePassed,j=Object(c.useRef)("Hidden"===e?"front":"back"),l=Object(c.useRef)("Front"===e||"Hidden"===e?"front":"back");"Front"===e&&"back"===l.current&&(j.current="front",l.current="front"),"Front"===e&&"front"===j.current&&(j.current="back"),"Hidden"===e&&"back"===j.current&&(j.current="front"),"Back"===e&&"front"===j.current&&(j.current="back",l.current="back"),"Back"===e&&"front"===l.current&&(l.current="back");var b=function(){i(e)};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(O,{state:j.current,front:function(t){return Object(d.jsx)(C,{isAnimating:t,onDoubleClick:a,seconds:u,onTimePassed:f})},back:Object(d.jsx)(O,{state:l.current,front:function(t){return Object(d.jsx)(k,{onClick:b,text:n})},back:Object(d.jsx)(I,{text:r,onClick:b,onConfirm:o,onCancel:s})})})})},D=n(81),E=function(){return Object(D.b)()},P=D.c,H=n(71),M=function(t){return function(t,e){var n=Math.floor(t-e);return n<0?0:n}(t.stageTime,(new Date).getTime()/1e3)},N=Object(H.b)({name:"cards",initialState:{cards:[]},reducers:{loadCards:function(t,e){},loadCardsSuccess:function(t,e){e.payload.forEach((function(e){void 0===e.stageTime&&(e.stageTime=0),t.cards.push(e)}))},addCard:function(t,e){},addCardSuccess:function(t,e){e.payload.card.id=e.payload.cardId,t.cards.unshift(e.payload.card)},increaseStage:function(t,e){var n,c=e.payload,r=t.cards.find((function(t){return t.id===c.card.id})),a=null!==(n=c.stages.find((function(t){return t.stage===c.card.stage+1})))&&void 0!==n?n:c.stages[c.stages.length-1],i=function(t){var e=new Date;return e.setSeconds(e.getSeconds()+t)/1e3}(a.time);e.payload.card.stageTime=i,e.payload.card.stage=a.stage,r.stageTime=i,r.stage=a.stage},increaseStageSuccess:function(t,e){},zeroStage:function(t,e){t.cards.find((function(t){return t.id===e.payload.id})).stage=0}}}),z=function(t){return t.cards.cards.map((function(t){return Object(l.a)({},t)}))},B=N.actions,R=B.loadCards,L=B.loadCardsSuccess,U=B.addCard,J=B.addCardSuccess,K=B.increaseStage,W=B.increaseStageSuccess,G=B.zeroStage,Y=N.reducer,Z=Object(H.b)({name:"settings",initialState:{stages:[{stage:0,time:0},{stage:1,time:600},{stage:2,time:3600},{stage:3,time:86400},{stage:4,time:172800},{stage:5,time:432e3},{stage:6,time:864e3},{stage:7,time:2592e3}]},reducers:{}}),q=function(t){return t.settings.stages},Q=Z.reducer,V=function(t){var e=t.card,n=t.sx,r=E(),a=P(q),i=Object(c.useState)("Hidden"),u=Object(o.a)(i,2),f=u[0],j=u[1];return Object(d.jsx)(s.a,{sx:Object(l.a)(Object(l.a)({},n),{},{height:200,width:200}),children:Object(d.jsx)(A,{state:f,frontText:e.front,backText:e.back,onHiddenDoubleClick:function(){j("Front")},onClick:function(t){j("Front"===t?"Back":"Front")},onConfirm:function(){j("Hidden"),r(K({card:e,stages:a}))},onCancel:function(){j("Front"),r(G(e))},seconds:M(e),onTimePassed:function(){j("Front")}})})},X=n(229),$=function(){var t=P(z);return Object(d.jsx)(X.a,{container:!0,sx:{justifyContent:"center"},children:t.map((function(t,e){return Object(d.jsx)(X.a,{item:!0,children:Object(d.jsx)(V,{sx:{mx:2,mt:2},card:t})},e)}))})},_=n(109),tt=((0,_.a.initializeApp)({apiKey:"AIzaSyChS5eDjKc6GZO9KmaYZMYWpItvN9Dg3O8",authDomain:"flipy-50e22.firebaseapp.com",databaseURL:"https://flipy-50e22-default-rtdb.firebaseio.com",projectId:"flipy-50e22",storageBucket:"flipy-50e22.appspot.com",messagingSenderId:"100967498287",appId:"1:100967498287:web:26c00fd67f4198a4c37cda"}),_.a.database().ref(),n(224)),et=n(221),nt=n(234),ct=n(135),rt=n.n(ct),at=function(){var t=E(),e=Object(c.useState)(""),n=Object(o.a)(e,2),r=n[0],a=n[1],i=Object(c.useState)(!1),u=Object(o.a)(i,2),f=u[0],j=u[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(y.a,{onClick:function(){j(!0)},sx:{position:"fixed",right:5,bottom:5,width:100,height:100},children:Object(d.jsx)(rt.a,{sx:{fontSize:40}})}),Object(d.jsx)(tt.a,{open:f,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:Object(d.jsx)(s.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:Object(d.jsxs)(h.a,{children:[Object(d.jsx)(et.a,{value:r,onChange:function(t){return a(t.target.value)},multiline:!0}),Object(d.jsx)(nt.a,{onClick:function(){return j(!1)},children:"Cancel"}),Object(d.jsx)(nt.a,{onClick:function(){JSON.parse(r).forEach((function(e){t(U(Object(l.a)(Object(l.a)({},e),{},{id:"",stage:0,stageTime:0})))})),j(!1)},children:"Confirm"})]})})})]})},it=n(136),ot=n.n(it),st=function(){return Object(d.jsx)(y.a,{onClick:function(){_.a.auth().signInWithPopup(new _.a.auth.GoogleAuthProvider)},sx:{position:"fixed",left:5,bottom:5,width:100,height:100},children:Object(d.jsx)(ot.a,{sx:{fontSize:40}})})};var ut=function(){var t=E(),e=Object(c.useState)(!1),n=Object(o.a)(e,2),r=n[0],a=n[1];return r||_.a.auth().onAuthStateChanged((function(t){void 0!==(null===t||void 0===t?void 0:t.uid)&&a(!0)})),Object(c.useEffect)((function(){r&&t(R())}),[r]),Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(j,{children:[Object(d.jsx)(s.a,{sx:{height:20}}),Object(d.jsx)($,{}),Object(d.jsx)(at,{}),Object(d.jsx)(st,{})]})})},dt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,237)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),c(t),r(t),a(t),i(t)}))},ft=n(223),jt=n(226),lt=n(219),bt=n(220),xt=n(137),Ot=n(113),ht=n(139),pt=n(0),gt=n.n(pt),mt=n(3),vt=n(227),Ct=function(){var t=Object(mt.a)(gt.a.mark((function t(e){var n,c,r,a,i;return gt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=_.a.firestore(),r=null===(n=_.a.auth().currentUser)||void 0===n?void 0:n.uid,a=c.collection("users").doc(r).collection(e),i=[],t.abrupt("return",new Promise((function(t){a.onSnapshot(function(){var e=Object(mt.a)(gt.a.mark((function e(n){return gt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.forEach((function(t){i.push(t.data())}));case 2:t(i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),kt=function(){var t=Object(mt.a)(gt.a.mark((function t(e,n){var c,r,a,i,o;return gt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=_.a.firestore(),a=null===(c=_.a.auth().currentUser)||void 0===c?void 0:c.uid,i=r.collection("users").doc(a).collection(e),o=Object(vt.a)(),n.id=o,t.next=7,i.doc(o).set(n);case 7:return t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),yt=function(){var t=Object(mt.a)(gt.a.mark((function t(e,n){var c,r,a,i;return gt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=_.a.firestore(),a=null===(c=_.a.auth().currentUser)||void 0===c?void 0:c.uid,i=r.collection("users").doc(a).collection(e),t.next=5,i.doc(n.id).update(n);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),St=function(){var t=Object(mt.a)(gt.a.mark((function t(){var e,n;return gt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ct("cards");case 2:return e=t.sent,n=[],e.forEach((function(t){n.push(t)})),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),wt=function(){var t=Object(mt.a)(gt.a.mark((function t(e){return gt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kt("cards",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Tt=function(){var t=Object(mt.a)(gt.a.mark((function t(e){return gt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yt("cards",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ft=Object(ft.a)(),It=Object(H.a)({reducer:{cards:Y,settings:Q},middleware:[Ft]}),At=Object(jt.a)((function(t,e){return t.pipe(Object(lt.a)(Object(Ot.isOfType)("cards/increaseStage")),Object(bt.a)((function(t){return Object(ht.a)(Tt(t.payload.card)).pipe(Object(xt.a)((function(){return W()})))})))}),(function(t,e){return t.pipe(Object(lt.a)(Object(Ot.isOfType)("cards/loadCards")),Object(bt.a)((function(t){return Object(ht.a)(St()).pipe(Object(xt.a)((function(t){return L(t)})))})))}),(function(t,e){return t.pipe(Object(lt.a)(Object(Ot.isOfType)("cards/addCard")),Object(bt.a)((function(t){return Object(ht.a)(wt(t.payload)).pipe(Object(xt.a)((function(e){return J({card:t.payload,cardId:e})})))})))}));Ft.run(At),i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(D.a,{store:It,children:Object(d.jsx)(ut,{})})}),document.getElementById("root")),dt()}},[[168,1,2]]]);
//# sourceMappingURL=main.af02eb39.chunk.js.map